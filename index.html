<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprende Python Interactivo</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Fira+Code&display=swap" rel="stylesheet">
    
    <style>
        /* Variables de Color */
        :root {
            --primary-color: #3498db; /* Azul vibrante */
            --accent-color: #e74c3c; /* Rojo para acentos/errores */
            --success-color: #2ecc71; /* Verde para 茅xito */
            --bg-color: #f8f9fa; /* Fondo claro */
            --text-color: #343a3c; /* Texto oscuro */
            --code-bg-color: #272822; /* Fondo del editor (Monokai-like) */
            --code-text-color: #f8f8f2;
        }

        /* Estilos Globales y Tipograf铆a */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Encabezado */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2em;
            font-weight: 700;
        }

        /* Contenedor Principal */
        .container {
            display: flex;
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        /* Barra Lateral (Navegaci贸n) */
        .sidebar {
            flex: 0 0 250px; /* Ancho fijo */
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            margin-right: 20px;
            height: fit-content;
        }

        .sidebar-title {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
        }

        #lesson-list {
            list-style: none;
        }

        #lesson-list li {
            padding: 10px 0;
            cursor: pointer;
            transition: background-color 0.2s;
            border-bottom: 1px solid #eee;
        }

        #lesson-list li:hover {
            background-color: #ecf0f1;
        }

        #lesson-list .active {
            background-color: var(--primary-color);
            color: white;
            padding-left: 10px;
            font-weight: 700;
            border-radius: 4px;
        }

        /* rea de Contenido Principal */
        .content-area {
            flex-grow: 1;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        }

        .content-area h2 {
            color: var(--text-color);
            margin-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
        }

        /* Secciones de Contenido */
        .theory-section, .scenario-section {
            margin-bottom: 30px;
        }

        .theory-section h3, .scenario-section h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        #theory-text {
            background-color: #ecf0f1;
            padding: 15px;
            border-left: 5px solid var(--primary-color);
            border-radius: 4px;
        }

        #scenario-prompt {
            font-weight: 700;
            color: var(--accent-color);
            margin: 15px 0;
        }

        /* Editor de C贸digo */
        .code-editor-container {
            border: 1px solid #ccc;
            border-radius: 6px;
            overflow: hidden;
            margin-top: 10px;
        }

        .editor-header {
            background-color: #333;
            padding: 8px 15px;
            color: #ccc;
            font-size: 0.9em;
        }

        .editor-language {
            font-family: 'Fira Code', monospace;
        }

        #user-code {
            width: 100%;
            padding: 15px;
            border: none;
            outline: none;
            resize: none;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            background-color: var(--code-bg-color);
            color: var(--code-text-color);
            caret-color: white;
        }

        /* Botones y Acciones */
        .actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #run-button {
            background-color: var(--primary-color);
            color: white;
        }

        #run-button:hover {
            background-color: #2980b9;
        }

        #next-button {
            background-color: var(--success-color);
            color: white;
        }

        #next-button:hover {
            background-color: #27ae60;
        }

        #next-button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        /* Retroalimentaci贸n */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: 700;
            display: none; /* Oculto por defecto */
        }

        .feedback.success {
            background-color: #d4edda;
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .feedback.error {
            background-color: #f8d7da;
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        /* Pie de P谩gina */
        footer {
            text-align: center;
            padding: 15px;
            margin-top: 40px;
            background-color: #34495e;
            color: white;
            font-size: 0.85em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 0 10px;
            }

            .sidebar {
                flex: auto;
                margin-right: 0;
                margin-bottom: 20px;
                position: static;
                width: 100%;
            }

            .content-area {
                padding: 20px;
            }
        }
    </style>
    </head>
<body>

    <header>
        <h1> Aprende Python Interactivo</h1>
    </header>

    <div class="container">
        <nav class="sidebar">
            <h3 class="sidebar-title">Unidades de Python</h3>
            <ul id="lesson-list">
                </ul>
        </nav>

        <main class="content-area">
            <h2 id="lesson-title">Selecciona un tema para empezar</h2>
            
            <section class="theory-section">
                <h3>Teor铆a</h3>
                <p id="theory-text">Usa el men煤 lateral para cargar la primera lecci贸n. Esta aplicaci贸n simular谩 un entorno de codificaci贸n Python para que practiques.</p>
            </section>

            <section class="scenario-section">
                <h3>Escenario de Pr谩ctica</h3>
                <p id="scenario-prompt">Aqu铆 aparecer谩 el desaf铆o de programaci贸n.</p>
                
                <div class="code-editor-container">
                    <div class="editor-header">
                        <span class="editor-language">Python (Simulado)</span>
                    </div>
                    <textarea id="user-code" rows="8" placeholder="Escribe tu c贸digo Python aqu铆..."></textarea>
                </div>

                <div class="actions">
                    <button id="run-button">Ejecutar/Verificar</button>
                    <button id="next-button" disabled style="display: none;">Siguiente Tema &rarr;</button>
                </div>
                
                <div id="results-feedback" class="feedback">
                    </div>
            </section>
        </main>
    </div>

    <footer>
        <p>&copy; 2025 Aplicaci贸n Educativa Interactiva. Programador Experto.</p>
    </footer>

    <script>
        // Estructura de datos para los escenarios de aprendizaje
        const lessons = [
            {
                id: 'variables',
                title: '1. Variables y Asignaci贸n',
                theory: 'En Python, una **variable** es como una caja con un nombre donde puedes almacenar datos. Para crear una variable, simplemente le das un nombre y usas el signo igual (`=`) para asignarle un valor.',
                prompt: 'Desaf铆o: Declara una variable llamada **edad** y as铆gnale el valor entero **25**.',
                validate: (code) => {
                    const cleanCode = code.trim().replace(/\s/g, '').toLowerCase();
                    let edad = null;
                    
                    if (cleanCode.includes('edad=25')) {
                        edad = 25; 
                    }

                    if (edad === 25) {
                        return { success: true, message: '隆Excelente! Has declarado correctamente la variable **edad** con el valor 25.' };
                    } else {
                        return { 
                            success: false, 
                            message: 'Error: Aseg煤rate de que el nombre de la variable sea **exactamente** `edad` y que el valor asignado sea el n煤mero `25`.' 
                        };
                    }
                }
            },
            {
                id: 'datatypes',
                title: '2. Tipos de Datos (String)',
                theory: 'El tipo de dato **String (cadena de texto)** se usa para almacenar texto y siempre va encerrado entre comillas dobles (`"`) o simples (`\'`). Para mostrar algo en pantalla se usa la funci贸n `print()`. Puedes unir strings (concatenar) con el operador `+`.',
                prompt: 'Desaf铆o: Declara una variable llamada **nombre** con el valor **"Alex"**. Luego, usa la funci贸n `print()` para mostrar en la consola la concatenaci贸n de la palabra "Hola, " y la variable **nombre**.',
                validate: (code) => {
                    const cleanCode = code.trim().replace(/\s/g, '');
                    const nameAssigned = cleanCode.includes('nombre="Alex"') || cleanCode.includes("nombre='Alex'");
                    const printExecuted = cleanCode.includes('print("Hola," + nombre)') || cleanCode.includes("print('Hola,' + nombre)");

                    if (nameAssigned && printExecuted) {
                        return { success: true, message: '隆Perfecto! Declaraste la variable correctamente y usaste `print()` para concatenar el saludo. La salida simulada ser铆a: **Hola, Alex**.' };
                    } else if (!nameAssigned) {
                        return { 
                            success: false, 
                            message: 'Error en la variable: Aseg煤rate de declarar **nombre** y asignarle el valor `"Alex"` (con comillas).' 
                        };
                    } else {
                        return { 
                            success: false, 
                            message: 'Error en el `print()`: Revisa que est茅s usando `print("Hola, " + nombre)` correctamente.' 
                        };
                    }
                }
            },
            {
                id: 'conditionals',
                title: '3. Condicionales (if/else)',
                theory: 'Las estructuras **condicionales** (`if`, `elif`, `else`) permiten que tu programa tome decisiones. La sintaxis b谩sica es: `if condicion: ... else: ...`. Recuerda la **indentaci贸n** (espacios o tabulaciones) despu茅s de los dos puntos (`:`) para el bloque de c贸digo.',
                prompt: 'Desaf铆o: Tienes una variable predefinida llamada **numero** (con valor 15). Escribe un c贸digo que use una estructura **if/else** para imprimir la frase **"Es un n煤mero grande"** si **numero** es mayor que 10, o la frase **"Es un n煤mero peque帽o"** en cualquier otro caso.',
                validate: (code) => {
                    const cleanCode = code.trim().replace(/\s/g, '').toLowerCase();

                    const ifCondition = cleanCode.includes('ifnumero>10:');
                    const printIf = cleanCode.includes('print("esunn煤merogrande")') || cleanCode.includes("print('esunn煤merogrande')");
                    const elseStatement = cleanCode.includes('else:');
                    const printElse = cleanCode.includes('print("esunn煤meropeque帽o")') || cleanCode.includes("print('esunn煤meropeque帽o')");


                    if (ifCondition && printIf && elseStatement && printElse) {
                        return { 
                            success: true, 
                            message: '隆Genial! Tu estructura `if/else` es correcta. Dado que `numero` es 15, la salida simulada es: **Es un n煤mero grande**.' 
                        };
                    } else if (!ifCondition) {
                        return { 
                            success: false, 
                            message: 'Error en la condici贸n `if`: Aseg煤rate de usar `if numero > 10:` correctamente.' 
                        };
                    } else if (!printIf || !printElse) {
                        return { 
                            success: false, 
                            message: 'Error en los mensajes `print`: Revisa que imprimas exactamente **"Es un n煤mero grande"** en el `if` y **"Es un n煤mero peque帽o"** en el `else`.' 
                        };
                    } else {
                        return { 
                            success: false, 
                            message: 'Error: Revisa la sintaxis general del `if/else`, incluyendo los dos puntos (`:`) y las palabras clave.' 
                        };
                    }
                }
            }
        ];

        // Variables de estado global
        let currentLessonIndex = 0;
        let unlockedLessonIndex = 0; 

        // Referencias del DOM
        const lessonListUl = document.getElementById('lesson-list');
        const lessonTitleH2 = document.getElementById('lesson-title');
        const theoryTextP = document.getElementById('theory-text');
        const scenarioPromptP = document.getElementById('scenario-prompt');
        const userCodeTextarea = document.getElementById('user-code');
        const runButton = document.getElementById('run-button');
        const nextButton = document.getElementById('next-button');
        const resultsFeedbackDiv = document.getElementById('results-feedback');

        /**
         * Carga el contenido de la lecci贸n actual en la interfaz.
         */
        function loadLesson(index) {
            // Solo permitir cargar lecciones que ya est谩n desbloqueadas o la que se est谩 haciendo actualmente.
            if (index < 0 || index > unlockedLessonIndex) {
                return; 
            }

            currentLessonIndex = index;
            const lesson = lessons[currentLessonIndex];

            // Actualizar el contenido principal
            lessonTitleH2.textContent = lesson.title;
            theoryTextP.innerHTML = lesson.theory;
            scenarioPromptP.textContent = lesson.prompt;
            userCodeTextarea.value = ''; // Limpiar el editor
            userCodeTextarea.disabled = false;
            
            // Resetear el feedback y botones
            resultsFeedbackDiv.style.display = 'none';
            resultsFeedbackDiv.className = 'feedback';
            resultsFeedbackDiv.innerHTML = '';
            
            runButton.style.display = 'inline-block';
            nextButton.style.display = 'none';

            // Resaltar la lecci贸n actual en la sidebar
            updateSidebarActiveState();
        }

        /**
         * Genera la lista de lecciones en la barra lateral, mostrando solo las desbloqueadas.
         */
        function createLessonList() {
            lessonListUl.innerHTML = '';
            
            for (let i = 0; i <= unlockedLessonIndex && i < lessons.length; i++) {
                const lesson = lessons[i];
                const li = document.createElement('li');
                li.textContent = lesson.title;
                li.setAttribute('data-index', i);
                
                li.addEventListener('click', () => loadLesson(i));
                lessonListUl.appendChild(li);
            }
        }

        /**
         * Resalta la lecci贸n activa en la barra lateral.
         */
        function updateSidebarActiveState() {
            document.querySelectorAll('#lesson-list li').forEach((li, index) => {
                li.classList.toggle('active', index === currentLessonIndex);
            });
        }

        /**
         * Maneja el clic en el bot贸n "Ejecutar/Verificar".
         */
        function handleRunCode() {
            const userCode = userCodeTextarea.value;
            const lesson = lessons[currentLessonIndex];
            
            const result = lesson.validate(userCode); 

            // Mostrar el feedback
            resultsFeedbackDiv.style.display = 'block';
            resultsFeedbackDiv.innerHTML = `<p>${result.message}</p>`;

            if (result.success) {
                resultsFeedbackDiv.classList.remove('error');
                resultsFeedbackDiv.classList.add('success');
                userCodeTextarea.disabled = true; // Desactivar el editor al completar

                // L贸gica de Desbloqueo: Si la lecci贸n actual es la 煤ltima desbloqueada
                if (currentLessonIndex === unlockedLessonIndex && currentLessonIndex < lessons.length - 1) {
                    unlockedLessonIndex++;
                    // Regeneramos la lista para mostrar la nueva lecci贸n
                    createLessonList(); 
                    
                    // Mostrar bot贸n para avanzar a la nueva lecci贸n
                    runButton.style.display = 'none';
                    nextButton.style.display = 'inline-block';
                    nextButton.disabled = false;
                    nextButton.textContent = `Siguiente Tema (${lessons[unlockedLessonIndex].title}) `;
                } else if (currentLessonIndex === lessons.length - 1) {
                    // ltima lecci贸n completada
                    runButton.style.display = 'none';
                    nextButton.style.display = 'none';
                    resultsFeedbackDiv.innerHTML += '<p>隆Felicidades! Has completado todos los temas iniciales.</p>';
                } else {
                    // Lecci贸n ya completada, no es necesario avanzar
                    runButton.style.display = 'none';
                    nextButton.style.display = 'none';
                }

            } else {
                resultsFeedbackDiv.classList.remove('success');
                resultsFeedbackDiv.classList.add('error');
                // Mantener el bot贸n de ejecutar visible para reintentar
                runButton.style.display = 'inline-block';
                nextButton.style.display = 'none';
            }
        }

        /**
         * Avanza a la siguiente lecci贸n desbloqueada (solo se llama si se complet贸 la anterior).
         */
        function handleNextLesson() {
            if (unlockedLessonIndex < lessons.length) {
                loadLesson(unlockedLessonIndex);
            }
        }

        // Inicializaci贸n de la aplicaci贸n
        document.addEventListener('DOMContentLoaded', () => {
            // Al cargar, solo mostramos la primera lecci贸n (铆ndice 0)
            createLessonList(); 
            loadLesson(0); 

            // Asignar manejadores de eventos a los botones
            runButton.addEventListener('click', handleRunCode);
            nextButton.addEventListener('click', handleNextLesson);
        });
    </script>
    </body>
</html>
